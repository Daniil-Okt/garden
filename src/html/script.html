<script src="js/app.min.js"></script>
<script>
    // 2. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3. This function creates an <iframe> (and YouTube player)
    //    after the API code downloads.
    var playerFirst;
    var playerTwo;
    var playerThree;
    function onYouTubeIframeAPIReady() {
      playerFirst = new YT.Player('playerFirst', {
          playerVars: {
            'playsinline': 1,
            'rel': 1, 
            'showinfo': 0,
            // 'controls': 0,
            'start': 1,
          },
          videoId: 'IBcwhaYP6Uk',
          
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
      });
      playerTwo = new YT.Player('playerTwo', {
          playerVars: {
            'playsinline': 1,
            'rel': 1, 
            'showinfo': 0,
            // 'controls': 0,
            'start': 1,
          },
          videoId: 'IBcwhaYP6Uk',
          
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
        playerThree = new YT.Player('playerThree', {
          playerVars: {
            'playsinline': 1,
            'rel': 1, 
            'showinfo': 0,
            // 'controls': 0,
            'start': 1,
          },
          videoId: 'IBcwhaYP6Uk',
          
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
      });
      const playerArray = [playerFirst, playerTwo, playerThree]
      videoPlayStop(playerArray);
    }
    // 4. The API will call this function when the video player is ready.
    function onPlayerReady(event) {
    //   event.target.playVideo();
        // videoPlayStop(playerArray);
    }
    // 5. The API calls this function when the player's state changes.
    //    The function indicates that when playing a video (state=1),
    //    the player should play for six seconds and then stop.
    function onPlayerStateChange(event) {
    //   if (event.data == YT.PlayerState.PLAYING && !done) {
    //     setTimeout(stopVideo, 6000);
    //     done = true;
    //   }
    }
    function videoPlayStop(playerArray) {
        const popupVideoAll = document.querySelectorAll('.popup-video')
        const popupClose = document.querySelectorAll('.popup-video-button')
        const buttonPlay = document.querySelectorAll('.popup-video-button-play')
        for (let index = 0; index < playerArray.length; index++) {
            const player = playerArray[index];
            popupClose[index].addEventListener('click', () => {
                player.stopVideo()
            })
            popupVideoAll[index].addEventListener('click', () => {
                player.stopVideo()
            })
            buttonPlay[index].addEventListener('click', () => {
                player.seekTo(1)
                player.playVideo()
            })
        }
        console.log(playerArray.length)
    }
  </script>